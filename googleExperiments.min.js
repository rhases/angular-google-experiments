angular.module("googleExperiments",["angularLoad"]),angular.module("googleExperiments").provider("googleExperiments",[function(){this.configure=function(conf){this.config=conf},this.$get=["$q","$timeout","angularLoad",function($q,$timeout,angularLoad){var variationDeferred=$q.defer();return angularLoad.loadScript("//www.google-analytics.com/cx/api.js?experiment="+this.config.experimentId).then(function(){variationDeferred.resolve(cxApi.chooseVariation())})["catch"](function(){variationDeferred.resolve(0)}),{getVariation:function(){return variationDeferred.promise}}}]}]),angular.module("googleExperiments").directive("variation",["googleExperiments",function(googleExperiments){return function(scope,element,attr){element.addClass("ng-cloak"),scope.$watch(attr.variation,function(value){googleExperiments.getVariation().then(function(variation){variation==value?(element.removeClass("ng-cloak"),element.removeClass("ng-hide")):element.addClass("ng-hide")})})}}]);